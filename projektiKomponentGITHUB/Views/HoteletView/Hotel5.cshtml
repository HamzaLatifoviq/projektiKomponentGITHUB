
@{
    ViewBag.Title = "Hotel5";
}



<h2>Vila Arta</h2>
<div class="container mt-4">
    <h2 class="text-center">Rezervoni Hotelin</h2>
    <div class="row">
        <!-- Carousel për fotografitë -->
        <div class="col-md-8">
            <div id="hotelCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="/Content/BesnikFotoHotel/vilaarta1.jpg" class="d-block w-100" alt="Pamje nga Vila Arta">
                    </div>
                    <div class="carousel-item">
                        <img src="/Content/BesnikFotoHotel/vilaarta2.jpg" class="d-block w-100" alt="Pamje e dhomës në Vila Arta">
                    </div>
                    <div class="carousel-item">
                        <img src="/Content/BesnikFotoHotel/vilaarta3.jpg" class="d-block w-100" alt="Pamje e restorantit në Vila Arta">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#hotelCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#hotelCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <!-- Përshkrimi i Hotelit -->
        <div class="col-md-4">
            <h5>Përshkrimi i Hotelit</h5>
            <p>
                **Vila Arta** ofron një atmosferë të ngrohtë dhe mikpritëse, ideale për pushime apo udhëtime biznesi.
                Me dhoma të mobiluara me kujdes, një restorant të mrekullueshëm dhe shërbime spa relaksuese,
                ky hotel siguron rehati dhe luks për të gjithë mysafirët.
            </p>
            <ul>
                <li>Dhoma moderne dhe të rehatshme.</li>
                <li>Kuzhinë tradicionale dhe ndërkombëtare.</li>
                <li>Spa dhe pishinë relaksuese.</li>
                <li>Afërsi me atraksionet kryesore të qytetit.</li>
                <li>Parkim falas dhe siguri maksimale.</li>
            </ul>
            <p>
                Stafi i përkushtuar është gjithmonë i gatshëm për t’ju ofruar një qëndrim të paharrueshëm.
                Vila Arta është zgjedhja perfekte për çdo rast.
            </p>
        </div>
    </div>

    <div class="container mt-4">
        <h3 class="text-center mt-5">Rezervoni Periudhën dhe Dhomën</h3>
        <form id="reservationForm" class="mt-3">
            <input type="hidden" id="hotelId" value="2" />

            <!-- Data e rezervimit me ikonë kalendari -->
            <div class="form-group position-relative" style="max-width:320px; margin-bottom:1rem;">
                <label for="reservationRange">Zgjidhni Periudhën:</label>
                <input type="text" id="reservationRange" class="form-control" placeholder="Zgjidhni intervalin e datave" required style="padding-left:2.5rem;" />
                <span class="input-icon" style="position:absolute; left:12px; top:60%; transform: translateY(-50%); font-size:18px; color:#555; pointer-events:none;">📅</span>
            </div>

            <!-- Numri i adultëve me ikonë personi -->
            <div class="form-group position-relative" style="max-width:320px; margin-bottom:1rem;">
                <label for="adultsCount">Adultë:</label>
                <input type="number" id="adultsCount" class="form-control" min="1" max="30" value="2" required style="padding-left:2.5rem;" />
                <span class="input-icon" style="position:absolute; left:12px; top:60%; transform: translateY(-50%); font-size:18px; color:#555; pointer-events:none;">👤</span>
            </div>

            <!-- Numri i fëmijëve me ikonë personi -->
            <div class="form-group position-relative" style="max-width:320px; margin-bottom:1rem;">
                <label for="childrenCount">Fëmijë (0-17 vjeç):</label>
                <input type="number" id="childrenCount" class="form-control" min="0" max="10" value="0" style="padding-left:2.5rem;" />
                <span class="input-icon" style="position:absolute; left:12px; top:60%; transform: translateY(-50%); font-size:18px; color:#555; pointer-events:none;">👤</span>
            </div>

            <!-- Numri i dhomave me ikonë shtepie/dhoma -->
            <div class="form-group position-relative" style="max-width:320px; margin-bottom:1rem;">
                <label for="roomsCount">Dhomat:</label>
                <input type="number" id="roomsCount" class="form-control" min="1" max="10" value="1" required style="padding-left:2.5rem;" />
                <span class="input-icon" style="position:absolute; left:12px; top:60%; transform: translateY(-50%); font-size:18px; color:#555; pointer-events:none;">🏠</span>
            </div>

            <button type="submit" class="btn btn-primary mt-3">Rezervoni</button>
        </form>

        <div id="message" class="mt-3"></div>
    </div>
</div>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Inicializimi i Flatpickr për zgjedhjen e intervalit të datave
        flatpickr("#reservationRange", {
            mode: "range", // Lejon zgjedhjen e intervalit të datave
            dateFormat: "Y-m-d", // Formati i datës
            minDate: "today", // Data minimale është data e sotme
        });

        // Event Listener për formën e rezervimit
        document.getElementById("reservationForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const hotelId = document.getElementById("hotelId").value;
            const reservationRange = document.getElementById("reservationRange").value;
            const adultsCount = document.getElementById("adultsCount").value;
            const childrenCount = document.getElementById("childrenCount").value;
            const roomsCount = document.getElementById("roomsCount").value;
            document.getElementById("message").innerHTML = "<div class='alert alert-success'>Rezervimi u krye me sukses .</div>";
            if (!reservationRange || !adultsCount || !roomsCount) {
                alert("Ju lutem plotësoni të gjitha fushat e detyrueshme.");
                return;
            }

            // Shembull i thirrjes për kontrollin e disponueshmërisë
            fetch('/Reservation/CheckAvailability', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ hotelId, reservationRange, adultsCount, childrenCount, roomsCount })
            })
                .then(response => response.json())
                .then(data => {
                    const messageDiv = document.getElementById("message");
                    if (data.available) {
                        // Nëse ka dhoma të lira, bëhet rezervimi
                        fetch('/Reservation/MakeReservation', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ hotelId, reservationRange, adultsCount, childrenCount, roomsCount })
                        })
                            .then(response => response.json())
                            .then(reservationData => {
                                if (reservationData.success) {

                                    messageDiv.innerHTML = `<div class="alert alert-success">${reservationData.message}</div>`;
                                } else {
                                    messageDiv.innerHTML = `<div class="alert alert-danger">${reservationData.message}</div>`;
                                }
                            });
                    } else {
                        messageDiv.innerHTML = `<div class="alert alert-danger">Nuk ka dhoma të lira për këtë periudhë.</div>`;
                    }
                });
        });
    });
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
</div>

