@{
    ViewBag.Title = "Hotel2";
}
<h2 class="text-primary text-center mb-4">Hotel Aleksandar Palace</h2>
<div class="container mt-4">
    <h2 class="text-start text-primary">Rezervoni Periudhën dhe Dhomën</h2>
    <div class="row">
        <div class="col-md-8">
            <div id="hotelCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="/Content/BesnikFotoHotel/aleksandarpalace1.jpg" class="d-block w-100" alt="">
                    </div>
                    <div class="carousel-item">
                        <img src="/Content/BesnikFotoHotel/aleksandarpalace2.jpg" class="d-block w-100" alt="">
                    </div>
                    <div class="carousel-item">
                        <img src="/Content/BesnikFotoHotel/aleksandarpalace3.jpg" class="d-block w-100" alt="">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#hotelCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#hotelCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <div class="col-md-4">
            <h5>Përshkrimi i Hotelit</h5>
            <p>
                Hotel Aleksandar Palace është një nga hotelet më të njohura dhe luksoze në Shkup,
                i vendosur në bregun e djathtë të lumit Vardar,
                pranë Parkut të Qytetit dhe vetëm 3 km larg nga qendra e qytetit.
            </p>
            <ul>
                <li>Vendndodhje strategjike pranë institucioneve kulturore dhe historike.</li>
                <li>Akomodim luksoz me të gjitha pajisjet moderne.</li>
                <li>Facilitete të shumta si pishina, sauna, fusha sportive.</li>
                <li>Restorant dhe bar me kuzhinë ndërkombëtare.</li>
                <li>Qendër konferencash për ngjarje biznesi.</li>
            </ul>
        </div>
    </div>

    <div class="mt-4">
        <form id="reservationForm" class="d-flex flex-wrap gap-4">
            <input type="hidden" id="hotelId" value="1" />

            <div class="form-group">
                <label for="reservationRange">Zgjidhni Periudhën:</label>
                <input type="text" id="reservationRange" class="form-control" placeholder="Zgjidhni datat" required />
            </div>

            <div class="form-group">
                <label for="adultsCount">Adultë:</label>
                <input type="number" id="adultsCount" class="form-control" min="1" max="30" value="2" required />
            </div>

            <div class="form-group">
                <label for="childrenCount">Fëmijë (0-17 vjeç):</label>
                <input type="number" id="childrenCount" class="form-control" min="0" max="10" value="0" />
            </div>

            <div class="form-group">
                <label for="roomsCount">Dhomat:</label>
                <input type="number" id="roomsCount" class="form-control" min="1" max="10" value="1" required />
            </div>

            <div class="form-group align-self-end">
                <button type="submit" class="btn btn-primary">Rezervoni</button>
            </div>
        </form>

        <div id="message" class="mt-3"></div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        flatpickr("#reservationRange", {
            mode: "range",
            dateFormat: "Y-m-d",
            minDate: "today",
        });

        const pricePerAdultPerNight = 50;
        const pricePerChildPerNight = 20;
        const pricePerRoomPerNight = 50;
        const messageDiv = document.getElementById("message");

        function calculatePrice() {
            const adultsCount = parseInt(document.getElementById("adultsCount").value, 10) || 0;
            const childrenCount = parseInt(document.getElementById("childrenCount").value, 10) || 0;
            const roomsCount = parseInt(document.getElementById("roomsCount").value, 10) || 1;
            const reservationRange = document.getElementById("reservationRange").value;

            let nightsCount = 1;
            if (reservationRange.includes(" to ")) {
                const [startDate, endDate] = reservationRange.split(" to ");
                const start = new Date(startDate);
                const end = new Date(endDate);
                nightsCount = Math.max((end - start) / (1000 * 60 * 60 * 24), 1);
            }

            const totalPrice = nightsCount *
                (adultsCount * pricePerAdultPerNight +
                    childrenCount * pricePerChildPerNight +
                    roomsCount * pricePerRoomPerNight);

            messageDiv.innerHTML = "<div class='alert alert-info'>Çmimi total: $" + totalPrice.toFixed(2) + "</div>";
        }

        document.querySelectorAll("#adultsCount, #childrenCount, #roomsCount, #reservationRange")
            .forEach(element => element.addEventListener("change", calculatePrice));

        document.getElementById("reservationForm").addEventListener("submit", function (e) {
            e.preventDefault();
            calculatePrice();
        });
    });
</script>
