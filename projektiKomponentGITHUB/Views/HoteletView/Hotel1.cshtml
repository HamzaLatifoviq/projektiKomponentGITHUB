@{
    ViewBag.Title = "Hotel1";
}

<h2>Hotel Stone Bridge</h2>
<div class="container mt-4">
    <h2 class="text-center">Rezervoni Hotelin</h2>
    <div class="row">
        <!-- Carousel për fotografitë -->
        <div class="col-md-8">
            <div id="hotelCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="/Content/BesnikFotoHotel/stonebridge1.jpg" class="d-block w-100" alt="Pamje nga Hotel Stone Bridge">
                    </div>
                    <div class="carousel-item">
                        <img src="/Content/BesnikFotoHotel/stonebridge2.jpg" class="d-block w-100" alt="Pamje e dhomës në Hotel Stone Bridge">
                    </div>
                    <div class="carousel-item">
                        <img src="/Content/BesnikFotoHotel/stonebridge3.jpg" class="d-block w-100" alt="Pamje e restorantit në Hotel Stone Bridge">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#hotelCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#hotelCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <!-- Përshkrimi i Hotelit -->
        <div class="col-md-4">
            <h5>Përshkrimi i Hotelit</h5>
            <p>
                Stone Bridge Hotel është një hotel luksoz me 5 yje i vendosur në zemër të Shkupit,
                pranë urës historike prej guri mbi lumin Vardar.
                Me një arkitekturë elegante dhe një atmosferë që ndërthur traditën me luksin modern,
                ky hotel ofron një përvojë të paharrueshme për vizitorët e tij.
            </p>
            <ul>
                Karakteristikat Kryesore
                <li>Vendndodhje e Përsosur: I pozicionuar në qendër të qytetit, pranë monumenteve kryesore si Ura e Gurit dhe Kalaja e Shkupit, duke e bërë të lehtë eksplorimin e atraksioneve kulturore dhe historike të qytetit.</li>
                <li>Akomodim Komod: Dhomat janë të dizajnuara me kujdes, duke ofruar një ambient të rehatshëm dhe të pastër për pushim pas një dite të ngarkuar.</li>
                <li>Shërbime Shtesë: Hoteli ofron një gamë të gjerë shërbimesh për të përmbushur nevojat e mysafirëve, duke përfshirë një pishinë të brendshme dhe një qendër fitnesi.</li>
            </ul>
        </div>
    </div>

    <div class="container mt-4">
        <h3 class="text-center mt-5">Rezervoni Periudhën dhe Dhomën</h3>

        @using (Html.BeginForm("Create", "Reservations", FormMethod.Post, new { id = "reservationForm" }))
        {
            @Html.AntiForgeryToken()

            /*<input type="hidden" id="hotelId" name="HotelID" value="1" />

            <!-- Hidden inputs for DataCheckIn and DataCheckOut that we will fill with JS -->
            <input type="hidden" id="DataCheckIn" name="DataCheckIn" />
            <input type="hidden" id="DataCheckOut" name="DataCheckOut" />
            <input type="hidden" id="CmimiTotal" name="CmimiTotal" />

            <!-- Optional: RoomID (if you want to allow room type selection) -->
            <!-- For now, let's just add a hidden roomId with 1 -->
            <input type="hidden" id="roomId" name="RoomID" value="1" />

            <div class="form-group position-relative" style="max-width:320px; margin-bottom:1rem;">
                <label for="reservationRange">Zgjidhni Periudhën:</label>
                <input type="text" id="reservationRange" class="form-control" placeholder="Zgjidhni intervalin e datave" required style="padding-left:2.5rem;" />
                <span class="input-icon" style="position:absolute; left:12px; top:60%; transform: translateY(-50%); font-size:18px; color:#555; pointer-events:none;">📅</span>
            </div>

            <div class="form-group position-relative" style="max-width:320px; margin-bottom:1rem;">
                <label for="adultsCount">Adultë:</label>
                <input type="number" id="adultsCount" name="NumriAdult" class="form-control" min="1" max="30" value="2" required style="padding-left:2.5rem;" />
                <span class="input-icon" style="position:absolute; left:12px; top:60%; transform: translateY(-50%); font-size:18px; color:#555; pointer-events:none;">👤</span>
            </div>

            <div class="form-group position-relative" style="max-width:320px; margin-bottom:1rem;">
                <label for="childrenCount">Fëmijë (0-17 vjeç):</label>
                <input type="number" id="childrenCount" name="NumriFemije" class="form-control" min="0" max="10" value="0" style="padding-left:2.5rem;" />
                <span class="input-icon" style="position:absolute; left:12px; top:60%; transform: translateY(-50%); font-size:18px; color:#555; pointer-events:none;">👤</span>
            </div>

            <div class="form-group position-relative" style="max-width:320px; margin-bottom:1rem;">
                <label for="roomsCount">Dhomat:</label>
                <input type="number" id="roomsCount" name="NumriDhomave" class="form-control" min="1" max="10" value="1" required style="padding-left:2.5rem;" />
                <span class="input-icon" style="position:absolute; left:12px; top:60%; transform: translateY(-50%); font-size:18px; color:#555; pointer-events:none;">🏠</span>
            </div>*/

            <button type="submit" class="btn btn-primary mt-3">Rezervoni</button>
        }

        <div id="message" class="mt-3"></div>
    </div>
    <!--
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            flatpickr("#reservationRange", {
                mode: "range",
                dateFormat: "Y-m-d",
                minDate: "today",
            });

            const reservationRangeInput = document.getElementById("reservationRange");
            const adultsInput = document.getElementById("adultsCount");
            const childrenInput = document.getElementById("childrenCount");
            const roomsInput = document.getElementById("roomsCount");
            const totalPriceInput = document.getElementById("CmimiTotal");
            const messageDiv = document.getElementById("message");

            function calculatePrice() {
                const reservationRange = reservationRangeInput.value;
                const dates = reservationRange.split(" to ");

                if (dates.length !== 2) {
                    messageDiv.innerHTML = "<span style='color: red;'>Zgjidhni një periudhë të vlefshme.</span>";
                    return;
                }

                const startDate = new Date(dates[0]);
                const endDate = new Date(dates[1]);

                const timeDiff = endDate - startDate;
                const days = timeDiff / (1000 * 3600 * 24);
                if (isNaN(days) || days <= 0) {
                    messageDiv.innerHTML = "<span style='color: red;'>Periudha duhet të jetë së paku 1 ditë.</span>";
                    return;
                }

                const adults = parseInt(adultsInput.value);
                const children = parseInt(childrenInput.value);
                const rooms = parseInt(roomsInput.value);

                // Example pricing logic
                const pricePerNightPerRoom = 50; // €50 per room per night
                const pricePerAdult = 10; // €10 per adult per night
                const pricePerChild = 5;  // €5 per child per night

                const total = (rooms * pricePerNightPerRoom + adults * pricePerAdult + children * pricePerChild) * days;

                totalPriceInput.value = total;
                messageDiv.innerHTML = `<strong>Çmimi total: €${total.toFixed(2)}</strong>`;
            }

            // Update price when any of these change
            [reservationRangeInput, adultsInput, childrenInput, roomsInput].forEach(el => {
                el.addEventListener("change", calculatePrice);
            });

            // Also calculate price right before submitting
            document.getElementById("reservationForm").addEventListener("submit", function (event) {
                const reservationRange = reservationRangeInput.value;
                const dates = reservationRange.split(" to ");
                if (dates.length !== 2) {
                    event.preventDefault();
                    alert("Ju lutem zgjidhni një periudhë të vlefshme.");
                    return false;
                }

                // Set hidden check-in and check-out dates
                document.getElementById("DataCheckIn").value = dates[0];
                document.getElementById("DataCheckOut").value = dates[1];

                calculatePrice(); // ensures CmimiTotal is updated
            });
        });
    </script>
        -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
